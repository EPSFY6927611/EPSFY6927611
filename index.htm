<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efficiency and Sustainability in Aviation</title>
    
    <!-- External CSS Libraries -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Internal CSS -->
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            background-color: #121212;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #333;
        }
        
        .banner-container {
            margin-bottom: 20px;
        }
        
        .banner {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }
        
        h1 {
            color: #ffffff;
            font-size: 28px;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        h2 {
            color: #b0b0b0;
            font-size: 18px;
            font-weight: normal;
        }
        
        /* Main Content Styles */
        main {
            background-color: #1e1e1e;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        h3 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #333;
        }
        
        /* Table of Contents */
        .toc-container {
            margin: 25px 0;
            padding: 20px;
            background-color: #252525;
            border-radius: 5px;
            border-left: 4px solid #444;
        }
        
        .toc-table {
            width: 100%;
            border-collapse: collapse;
            font-family: Arial, sans-serif;
        }
        
        .toc-table th {
            background-color: #333;
            color: white;
            padding: 12px;
            text-align: left;
        }
        
        .toc-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #444;
        }
        
        .toc-table tr:nth-child(even) {
            background-color: #2a2a2a;
        }
        
        .toc-table tr:hover {
            background-color: #363636;
        }
        
        .toc-table a {
            color: #4dabf7;
            text-decoration: none;
            display: block;
            padding: 5px 0;
        }
        
        .toc-table a:hover {
            color: #74c0fc;
            text-decoration: underline;
        }
        
        /* Dropdown Styles */
        .dropdown {
            margin: 10px 0;
        }
        
        .dropdown-header {
            background-color: #333;
            color: white;
            padding: 12px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .dropdown-header:hover {
            background-color: #444;
        }
        
        .dropdown-header i {
            transition: transform 0.3s;
        }
        
        .dropdown-content {
            max-height: 0;
            overflow: hidden;
            background-color: #2a2a2a;
            border-radius: 0 0 4px 4px;
            transition: max-height 0.5s ease-out;
        }
        
        .dropdown-content.show {
            max-height: 500px;
        }
        
        .dropdown-item {
            padding: 10px 20px;
            border-bottom: 1px solid #3a3a3a;
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .dropdown-item a {
            color: #b0b0b0;
            text-decoration: none;
            display: block;
            transition: color 0.2s;
        }
        
        .dropdown-item a:hover {
            color: #4dabf7;
        }
        
        /* Content Sections */
        .content-section {
            margin-bottom: 30px;
        }
        
        pre {
            white-space: pre-wrap;
            font-family: inherit;
            line-height: 1.5;
            margin: 15px 0;
            padding: 15px;
            background-color: #252525;
            border-radius: 5px;
            border-left: 3px solid #444;
            color: #e0e0e0;
        }
        
        /* Metadata Section */
        .metadata-section {
            margin-top: 40px;
            padding: 20px;
            background-color: #252525;
            border-radius: 8px;
            border: 1px solid #333;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .metadata-box {
            padding: 15px;
            background-color: #1e1e1e;
            border-radius: 5px;
            border: 1px solid #333;
        }
        
        .metadata-box h4 {
            color: #4dabf7;
            margin-bottom: 10px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .metadata-box .value {
            color: #ffffff;
            font-size: 16px;
            font-weight: 600;
        }
        
        .metadata-box .label {
            color: #b0b0b0;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .refresh-btn {
            background-color: #4dabf7;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: background-color 0.2s;
            margin-top: 10px;
        }
        
        .refresh-btn:hover {
            background-color: #339af0;
        }
        
        .refresh-btn:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        
        /* Links in content */
        a {
            color: #4dabf7;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            main {
                padding: 15px;
            }
            
            .metadata-section {
                grid-template-columns: 1fr;
            }
            
            .toc-table {
                font-size: 14px;
            }
            
            .dropdown-header {
                padding: 10px;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 20px;
            }
            
            h2 {
                font-size: 16px;
            }
            
            .toc-table th,
            .toc-table td {
                padding: 8px;
            }
        }
        
        /* Utility Classes */
        .hr-divider {
            height: 2px;
            background-color: #333;
            margin: 30px 0;
            border: none;
        }
        
        /* Section visibility */
        .section-content {
            display: none;
            padding: 15px;
            background-color: #252525;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .section-content.active {
            display: block;
        }
        
        .loading {
            opacity: 0.5;
        }
    </style>
</head>
<body>
    <header>
        <div class="banner-container">
            <img src="WebBanner2023.png" alt="Research Banner" class="banner">
        </div>
        <h1>Efficiency and Sustainability in Aviation: A Comparative Analysis of Commercial and Military Aircraft Design</h1>
        <h2>Student URN: 6927611</h2>
    </header>
    
    <hr class="hr-divider">
    
    <main>
        <!-- Table of Contents -->
        <div class="toc-container">
            <table class="toc-table">
                <tr>
                    <th colspan="2">
                        <h3 style="color: white; margin: 0;">Table of Contents</h3>
                    </th>
                </tr>
                <tr>
                    <td><a href="#abstract">1. Abstract</a></td>
                </tr>
                <tr>
                    <td>
                        <!-- Analysis Dropdown -->
                        <div class="dropdown">
                            <div class="dropdown-header" onclick="toggleDropdown()">
                                <span>2. Analysis and Discussion</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="dropdown-content" id="analysisDropdown">
                                <div class="dropdown-item">
                                    <a href="#population-growth-impact">2.1 The potential impact of population growth on the aviation industry</a>
                                </div>
                                <div class="dropdown-item">
                                    <a href="#jet-fuel-impact">2.2 How Jet fuel and engines impact the environment</a>
                                </div>
                                <div class="dropdown-item">
                                    <a href="#production-trend">2.3 The aircraft production trend</a>
                                </div>
                                <div class="dropdown-item">
                                    <a href="#fleet-trends">2.4 Fleet sizes and trends</a>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td><a href="#conclusion">3. Conclusion</a></td>
                </tr>
                <tr>
                    <td><a href="#references">4. References and Tables</a></td>
                </tr>
            </table>
        </div>
        
        <hr class="hr-divider">
        
        <!-- Abstract Section -->
        <section id="abstract" class="content-section">
            <h3>Abstract</h3>
            <pre>
This paper presents a comparative analysis of the drivers of efficiency and sustainability in commercial and military aviation. In the context of a growing global population and increasing air travel demand, this study argues that the two sectors are fundamentally diverged in their design priorities. Commercial aviation is demonstrated to be increasingly socio-environmentally driven, prioritising fuel efficiency, safety, and investment in sustainable innovations such as Sustainable Aviation Fuels (SAFs) and lightweight composites. In contrast, military aviation remains predominantly focused on performance and operational capabilities, often at the expense of environmental considerations. This divergence is exacerbated by geopolitical conflicts and tensions, which reinforce defence imperatives. By examining fleet data, technological trends, and industry forecasts, this analysis concludes that the performance paradigm of military aviation presents a significant challenge to broader aviation sustainability goals. This reveals a critical imbalance between technological advancement in performance and the urgent need for ecological responsibility.
            </pre>
        </section>
        
        <!-- Analysis Section -->
        <section id="analysis" class="content-section">
            <h3>Analysis and Discussion</h3>
            <div id="Analysis_InText">
                <p>Example analysis content...</p>
                <p>Blah..Blahh..Blah.. (Table supporting Blah)</p>
                <p>Supporting article of Blah (random example): 
                    <a href="https://www.icevirtuallibrary.com/doi/full/10.1680/jbren.21.00034" target="_blank">
                        Toshihiko et al (2023)
                    </a>
                </p>
                
                <!-- Analysis Subsections (initially hidden, shown when links are clicked) -->
                <div id="population-growth-impact-content" class="section-content">
                    <h4>The potential impact of population growth on the aviation industry</h4>
                    <p>Content for this section will appear here when you click the link in the dropdown.</p>
                </div>
                
                <div id="jet-fuel-impact-content" class="section-content">
                    <h4>How Jet fuel and engines impact the environment</h4>
                    <p>Content for this section will appear here when you click the link in the dropdown.</p>
                </div>
                
                <div id="production-trend-content" class="section-content">
                    <h4>The aircraft production trend</h4>
                    <p>Content for this section will appear here when you click the link in the dropdown.</p>
                </div>
                
                <div id="fleet-trends-content" class="section-content">
                    <h4>Fleet sizes and trends</h4>
                    <p>Content for this section will appear here when you click the link in the dropdown.</p>
                </div>
            </div>
        </section>
        
        <!-- Conclusion Section -->
        <section id="conclusion" class="content-section">
            <h3>Conclusion</h3>
            <div id="Conclusion_InText">
                <p>Content for this section...</p>
            </div>
        </section>
        
        <!-- References Section -->
        <section id="references" class="content-section">
            <h3>References and Tables</h3>
            <p>Content for this section...</p>
        </section>
        
        <!-- Metadata Section -->
        <div class="metadata-section">
            <div class="metadata-box">
                <h4><i class="fas fa-clock"></i> Last Updated</h4>
                <div class="value" id="lastUpdated">Loading...</div>
                <div class="label" id="relativeTime"></div>
                <button onclick="refreshMetadata()" class="refresh-btn" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            
            <div class="metadata-box">
                <h4><i class="fas fa-file-word"></i> Word Count</h4>
                <div class="value" id="wordCount">0</div>
                <div class="label">Total words in analysis and conclusion</div>
            </div>
        </div>
    </main>
    
    <script>
        // Toggle Dropdown Function
        function toggleDropdown() {
            const dropdown = document.getElementById('analysisDropdown');
            const icon = document.querySelector('.dropdown-header i');
            
            dropdown.classList.toggle('show');
            
            // Rotate chevron icon
            if (dropdown.classList.contains('show')) {
                icon.style.transform = 'rotate(180deg)';
            } else {
                icon.style.transform = 'rotate(0deg)';
            }
        }
        
        // Format relative time
        function getRelativeTime(date) {
            const now = new Date();
            const diff = now - date;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
            if (hours < 24) return `${hours} hour${hours > 1 ? 's' : ''} ago`;
            if (days < 30) return `${days} day${days > 1 ? 's' : ''} ago`;
            
            return date.toLocaleDateString();
        }
        
        // Format date nicely
        function formatDate(date) {
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            return date.toLocaleDateString('en-GB', options);
        }
        
        // GitHub API Functions
        async function getLastUpdatedTime() {
            const username = 'nr0025';
            const repo = 'FY0025';
            
            const url = `https://api.github.com/repos/${username}/${repo}/commits`;
            
            try {
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json',
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Error: ${response.status}`);
                }
                
                const commits = await response.json();
                
                if (commits && commits.length > 0) {
                    const lastCommitDate = new Date(commits[0].commit.committer.date);
                    document.getElementById('lastUpdated').innerText = formatDate(lastCommitDate);
                    document.getElementById('relativeTime').innerText = getRelativeTime(lastCommitDate);
                } else {
                    document.getElementById('lastUpdated').innerText = 'No commits found';
                    document.getElementById('relativeTime').innerText = '';
                }
            } catch (error) {
                console.error('Error fetching repository data:', error);
                document.getElementById('lastUpdated').innerText = 'Unable to fetch';
                document.getElementById('relativeTime').innerText = 'Check repository settings';
            }
        }
        
        async function refreshMetadata() {
            const btn = document.getElementById('refreshBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
            
            await getLastUpdatedTime();
            
            setTimeout(() => {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-sync-alt"></i> Refresh';
            }, 1000);
        }
        
        // Word Count Functions
        function displayWordCount(sectionId) {
            const element = document.getElementById(sectionId);
            if (!element) return 0;
            
            const text = element.textContent || element.innerText;
            const wordArray = text.trim().split(/\s+/).filter(word => word.length > 0);
            return wordArray.length;
        }
        
        function displayTotalWordCount() {
            const analysisCount = displayWordCount("Analysis_InText");
            const conclusionCount = displayWordCount("Conclusion_InText");
            
            const totalWordCount = analysisCount + conclusionCount;
            document.getElementById("wordCount").innerText = totalWordCount.toLocaleString();
        }
        
        // Show specific section content when dropdown link is clicked
        document.addEventListener('DOMContentLoaded', function() {
            // Add click event listeners to dropdown links
            const dropdownLinks = document.querySelectorAll('.dropdown-item a');
            
            dropdownLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Get the target section ID from the href
                    const targetId = this.getAttribute('href').substring(1);
                    const contentId = targetId + '-content';
                    
                    // Hide all section contents first
                    const allContents = document.querySelectorAll('.section-content');
                    allContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Show the selected section content
                    const targetContent = document.getElementById(contentId);
                    if (targetContent) {
                        targetContent.classList.add('active');
                        
                        // Scroll to the content section
                        targetContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    
                    // Close the dropdown after selection (optional)
                    const dropdown = document.getElementById('analysisDropdown');
                    const icon = document.querySelector('.dropdown-header i');
                    dropdown.classList.remove('show');
                    icon.style.transform = 'rotate(0deg)';
                });
            });
            
            // Also handle direct anchor links for regular navigation
            const anchorLinks = document.querySelectorAll('a[href^="#"]');
            anchorLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    // Only process if it's not a dropdown link (already handled above)
                    if (href && !href.includes('-content') && href !== '#') {
                        const targetId = href.substring(1);
                        const targetElement = document.getElementById(targetId);
                        
                        if (targetElement) {
                            e.preventDefault();
                            targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    }
                });
            });
        });
        
        // Initialize everything when page loads
        window.onload = function() {
            getLastUpdatedTime();
            displayTotalWordCount();
            
            // Open dropdown if there's a hash in the URL
            const hash = window.location.hash;
            if (hash && (hash.includes('-impact') || hash.includes('-trend'))) {
                const dropdown = document.getElementById('analysisDropdown');
                const icon = document.querySelector('.dropdown-header i');
                dropdown.classList.add('show');
                icon.style.transform = 'rotate(180deg)';
            }
        };
    </script>
</body>
</html>
